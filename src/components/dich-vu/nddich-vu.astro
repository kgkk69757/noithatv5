---
import "../../css/nddich-vu.css";
import { fetchTrangDichVu } from "../../lib/api/dich-vu";
import type { TrangDichVu } from "../../lib/types/dich-vu";

// Gọi API lấy dữ liệu trang dịch vụ
let trangDichVu: TrangDichVu | null;
try {
  trangDichVu = await fetchTrangDichVu();
} catch (error) {
  console.error("Lỗi khi lấy dữ liệu trang dịch vụ:", error);
  trangDichVu = null;
}
---

<section class="dich-vu-section">
  <div class="container">
    {
      trangDichVu && (
        <article class="dich-vu-content">
          <header class="article-header">
            <h1 class="article-title">{trangDichVu.tieude}</h1>
            <div class="article-meta">
              <time class="publish-date">
                {new Date(trangDichVu.baiviet.created_at).toLocaleDateString(
                  "vi-VN"
                )}
              </time>
            </div>
          </header>

          <div class="article-image">
            <img
              src={trangDichVu.baiviet.img}
              alt={trangDichVu.baiviet.img_alt || trangDichVu.tieude}
              loading="lazy"
            />
          </div>

          <div class="article-body">
            <div class="content" set:html={trangDichVu.baiviet.noidung} />
          </div>
        </article>
      )
    }

    {
      !trangDichVu && (
        <div class="no-content">
          <i class="fa-solid fa-exclamation-triangle" />
          <h3>Không thể tải nội dung</h3>
          <p>Vui lòng thử lại sau hoặc liên hệ với chúng tôi để được hỗ trợ.</p>
        </div>
      )
    }
  </div>
</section>
